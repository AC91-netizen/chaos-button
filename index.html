<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Family Chaos Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 20px;
    }

    button {
      font-size: 1.3em;
      padding: 15px 25px;
      margin: 10px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    .name-btn { background: #333; color: white; }

    #chaosBtn {
      display: none;
      background: red;
      font-size: 2em;
      margin-top: 30px;
      padding: 20px 30px;
    }

    #homeBtn {
      display: none;
      background: #555;
      color: white;
      font-size: 1.2em;
      padding: 10px 20px;
      margin-top: 20px;
    }

    #eventBox {
      margin-top: 40px;
      font-size: 2em;
      font-weight: bold;
      padding: 20px;
      border: 3px solid yellow;
      border-radius: 12px;
      display: none;
      background: #222;
      color: #ff0;
    }
  </style>
</head>

<body>

<h1 id="title">WHO ARE YOU?</h1>

<div id="names">
  <button class="name-btn" onclick="pick('Dad')">Dad</button>
  <button class="name-btn" onclick="pick('Mum')">Mum</button>
  <button class="name-btn" onclick="pick('Dan')">Dan</button>
  <button class="name-btn" onclick="pick('Nevaeh')">Nevaeh</button>
  <button class="name-btn" onclick="pick('Arley')">Arley</button>
  <button class="name-btn" onclick="pick('Colby')">Colby</button>
</div>

<button id="chaosBtn" onclick="triggerChaos()">üî• CHAOS üî•</button>
<button id="homeBtn" onclick="goHome()">üè† HOME</button>

<div id="eventBox"></div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDctCR2xesI471aOuzePR_96SO4RpzR0wk",
  authDomain: "chaos-engine-family.firebaseapp.com",
  projectId: "chaos-engine-family",
  storageBucket: "chaos-engine-family.appspot.com",
  messagingSenderId: "19846684318",
  appId: "1:19846684318:web:433a9a16b1c4b7ca6a658f"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let currentPicker = "";

// RANDOM CHAOS EVENTS (tons of them)
const chaosEvents = [
  "Dance Break ‚Äì 30 seconds!",
  "Silly Voices ‚Äì talk like a robot for 1 minute!",
  "Freeze! ‚Äì nobody move for 10 seconds!",
  "Dad Chooses Music ‚Äì play a song!",
  "Nevaeh‚Äôs Joke Time ‚Äì tell a joke!",
  "Arley‚Äôs Nerf Attack ‚Äì 1 minute!",
  "Colby Challenge ‚Äì make a funny face!",
  "Flashlight Tag ‚Äì lights out!",
  "Sing the Alphabet Backwards!",
  "Shadow Puppets Contest!",
  "Spin Around 5 Times!",
  "Jump Like a Kangaroo!",
  "Laugh Out Loud Challenge!",
  "Balance on One Foot ‚Äì 20 seconds!",
  "Imitate Your Favorite Animal!",
  "Silent Dance ‚Äì no sound allowed!",
  "Pillow Tower Race!",
  "Fastest Clap Competition!",
  "Sock Slide Challenge!",
  "Mystery Snack Time ‚Äì choose blindly!",
  "Freeze Frame Pose!",
  "March Like a Parade!",
  "Funny Walk Across the Room!",
  "Make Up a Short Rap!",
  "Draw a Crazy Monster in the Air!",
  "Hop Like a Bunny!",
  "Handstand Challenge!",
  "Giggle Attack!",
  "Spin a Story Challenge!",
  "Tongue Twister Contest!",
  "Dance Like No One‚Äôs Watching!",
  "Imitate a Famous Character!",
  "Sing a Random Song Line!",
  "Funny Face Selfie Time!",
  "Robot Dance Battle!",
  "Mime a Scene from a Movie!",
  "Pretend to Be a Superhero!",
  "Make a Silly Hat from Anything!",
  "Quick Freeze and Pose!",
  "Hop on One Foot While Singing!",
  "Backwards Walk Challenge!",
  "Whistle a Tune Contest!",
  "Fastest Finger Clap!",
  "Spin and Touch the Ground!",
  "Improv Joke Time!",
  "Act Like Your Favorite Pet!",
  "Silly March Around the Room!"
];

// PICK A NAME
function pick(name) {
  currentPicker = name;
  document.getElementById("title").innerText =
    "IDENTITY CONFIRMED: " + name.toUpperCase();

  // Hide all names for dramatic effect
  document.getElementById("names").style.display = "none";

  // Show chaos button and home button
  document.getElementById("chaosBtn").style.display = "inline-block";
  document.getElementById("homeBtn").style.display = "inline-block";
}

// TRIGGER CHAOS
function triggerChaos() {
  if (!currentPicker) return;

  // Pick random event
  const randomIndex = Math.floor(Math.random() * chaosEvents.length);
  const chaosText = chaosEvents[randomIndex];

  // Show it in big event box
  const box = document.getElementById("eventBox");
  box.innerText = chaosText + " (" + currentPicker + ")";
  box.style.display = "block";

  // Update Firestore global state
  db.collection("state").doc("global").set({
    currentPicker: currentPicker,
    activeChaos: chaosText,
    cooldownUntil: Date.now() + 60000 // 1-minute cooldown
  }, { merge: true });

  // Increment stats for this user
  db.collection("stats").doc(currentPicker).set({
    count: firebase.firestore.FieldValue.increment(1),
    lastActivated: new Date()
  }, { merge: true });
}

// GO HOME / RESET
function goHome() {
  currentPicker = "";
  document.getElementById("title").innerText = "WHO ARE YOU?";
  document.getElementById("names").style.display = "block";
  document.getElementById("chaosBtn").style.display = "none";
  document.getElementById("homeBtn").style.display = "none";
  document.getElementById("eventBox").style.display = "none";
}
</script>

</body>
</html>
